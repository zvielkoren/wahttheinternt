<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>רשתות, מה זה האינטרנט? ואיך זה עובד?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: היישום משתמש בסרגל ניווט עליון קבוע כדי לעבור בין ארבעה חלקים נושאיים עיקריים: 'מבוא', 'איך זה עובד', 'השער שלך לאינטרנט' ו'סיכום'. מבנה הטאבים הלא-ליניארי הזה נבחר על פני גלילה פשוטה כדי לאפשר למשתמשים לקפוץ בקלות לנושאים שמעניינים אותם ולמקד את האלמנט האינטראקטיבי המרכזי - דיאגרמה חזותית של זרימת נתונים - בחלק ייעודי משלו. הדבר משפר את חווית המשתמש והופך את התהליך המורכב של תקשורת אינטרנט לקל יותר לעיכול על ידי פירוקו לחלקים הניתנים לחקירה. -->
    <!-- Visualization & Content Choices: 
        - Report Info: מהי רשת/למה אנחנו צריכים אותה. -> Goal: יידוע. -> Viz: דיאגרמה מבוססת אייקונים (HTML/CSS). -> Interaction: ריחוף להדגשה. -> Justification: הקדמה ויזואלית ופשוטה למושג הליבה. -> Method: Tailwind CSS.
        - Report Info: LAN מול WAN. -> Goal: השוואה. -> Viz: כרטיסים זה לצד זה עם אייקונים. -> Interaction: תצוגה סטטית. -> Justification: השוואה ברורה וישירה בין שני סוגי הרשתות העיקריים. -> Method: Tailwind CSS.
        - Report Info: איך האינטרנט עובד (נתבים, שרתים, כבלים). -> Goal: הסבר תהליך. -> Viz: דיאגרמה אינטראקטיבית של רשת ביתית המתחברת לאינטרנט ולשרתים. -> Interaction: לחיצה על רכיבים (נתב, שרת) לחשיפת טקסט הסבר; נקודה מונפשת המציגה זרימת נתונים. -> Justification: הופך הסבר סטטי לחוויה מרתקת וניתנת לחקירה המדגימה באופן חזותי את מסע הנתונים. -> Method: HTML/CSS/JS.
        - Report Info: דפדפן ושימוש יומיומי. -> Goal: קישור לחוויית המשתמש. -> Viz: כרטיסיות מעוצבות עם אייקונים למשימות יומיומיות. -> Interaction: לחיצה להצגת טקסט קשור. -> Justification: מחבר מושגים מופשטים לפעולות יומיומיות ומוחשיות של המשתמש. -> Method: HTML/CSS/JS.
        - NO SVG/Mermaid used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Assistant', sans-serif;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .nav-btn {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-btn.active {
            border-bottom-color: #1e40af; /* blue-800 */
            color: #1e40af; /* blue-800 */
        }
        #data-packet {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #ef4444; /* red-500 */
            border-radius: 50%;
            transition: left 1s ease-in-out, top 1s ease-in-out, background-color 0.3s ease; /* Transition left and top directly */
            box-shadow: 0 0 8px #ef4444;
            opacity: 0;
            z-index: 10;
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-3">
            <ul class="flex justify-center space-x-4 md:space-x-8 rtl:space-x-reverse text-lg">
                <li><button class="nav-btn active" onclick="showSection('intro')">מבוא</button></li>
                <li><button class="nav-btn" onclick="showSection('how-it-works')">איך זה עובד?</button></li>
                <li><button class="nav-btn" onclick="showSection('gateway')">השער שלך לאינטרנט</button></li>
                <li><button class="nav-btn" onclick="showSection('summary')">סיכום</button></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="intro" class="section active animate-fade-in">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-blue-800 mb-4">מה זו רשת ומי צריך אותה?</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">כדי להבין את האינטרנט, צריך קודם להבין את הרעיון הבסיסי של רשת. כאן נפרק את המושגים היסודיים ונגלה מדוע רשתות הן חלק כל כך חיוני מהעולם הדיגיטלי שלנו.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-blue-700">מה זו בכלל רשת?</h2>
                    <p class="mb-2"><strong class="font-semibold">דמיינו עיר:</strong> בואו נחשוב על עיר שבה אנשים רוצים לתקשר, לשתף מידע ולעבור ממקום למקום.</p>
                    <p class="mb-2"><strong class="font-semibold">רשת בעיר:</strong> מערכת הכבישים, קווי הטלפון, ורשתות החשמל – כל אלה הם סוגים של רשתות. הם מאפשרים לאנשים ולמידע לנוע.</p>
                    <p><strong class="font-semibold">רשת מחשבים:</strong> באופן דומה, רשת מחשבים היא אוסף של מחשבים והתקנים אחרים שמחוברים זה לזה, ויכולים לתקשר ולשתף משאבים.</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-blue-700">למה אנחנו צריכים רשתות?</h2>
                    <ul class="space-y-3 list-inside">
                        <li class="flex items-start"><span class="text-blue-600 text-2xl mr-2 rtl:ml-2 rtl:mr-0">&#10003;</span> <strong>שיתוף מידע:</strong> במקום לשלוח קבצים אחד אחד, רשת מאפשרת לכולם לגשת לאותם קבצים ממקום מרכזי.</li>
                        <li class="flex items-start"><span class="text-blue-600 text-2xl mr-2 rtl:ml-2 rtl:mr-0">&#10003;</span> <strong>שיתוף משאבים:</strong> מדפסות, סורקים או אפילו תוכנות יקרות יכולות להיות משותפות לכל המשתמשים ברשת.</li>
                        <li class="flex items-start"><span class="text-blue-600 text-2xl mr-2 rtl:ml-2 rtl:mr-0">&#10003;</span> <strong>תקשורת יעילה:</strong> מיילים, הודעות מיידיות ושיחות וידאו מתאפשרים בזכות רשתות.</li>
                        <li class="flex items-start"><span class="text-blue-600 text-2xl mr-2 rtl:ml-2 rtl:mr-0">&#10003;</span> <strong>גישה לאינטרנט:</strong> החיבור לעולם הגדול.</li>
                    </ul>
                </div>
            </div>

            <div class="mt-12 bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-2xl font-bold mb-4 text-center text-blue-700">סוגי רשתות (על קצה המזלג)</h3>
                 <div class="grid md:grid-cols-2 gap-8">
                    <div class="border border-gray-200 p-4 rounded-md text-center">
                        <div class="text-6xl mb-2">🏢</div>
                        <h4 class="text-xl font-semibold mb-2">רשת מקומית (LAN)</h4>
                        <p>רשת קטנה יחסית, כמו בבית או במשרד. כל המכשירים נמצאים בקרבה פיזית זה לזה. למשל: המחשב, הטלפון והמדפסת שמחוברים לנתב הביתי שלכם.</p>
                    </div>
                     <div class="border border-gray-200 p-4 rounded-md text-center">
                        <div class="text-6xl mb-2">🌍</div>
                        <h4 class="text-xl font-semibold mb-2">רשת רחבה (WAN)</h4>
                        <p>רשת גדולה המשתרעת על פני שטח נרחב, כמו עיר, מדינה או יבשות. האינטרנט הוא הדוגמה הגדולה והמוכרת ביותר לרשת WAN.</p>
                    </div>
                </div>
            </div>

            <div class="flex justify-end mt-12">
                <button class="nav-linear-btn next-btn bg-blue-600 text-white font-bold py-2 px-6 rounded-full hover:bg-blue-700 transition" onclick="goToNextSection()">הבא &#8250;</button>
            </div>
        </section>

        <section id="how-it-works" class="section">
             <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-blue-800 mb-4">איך כל זה עובד?</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">מהרגע שלחצתם על קישור ועד שהאתר מופיע על המסך, מתרחש מסע מופלא של מידע. בחלק זה נצא למסע וירטואלי ונראה כיצד הנתונים נעים ברחבי העולם, בעזרת הדיאגרמה האינטראקטיבית שלנו.</p>
            </div>

            <div class="bg-white p-4 md:p-8 rounded-lg shadow-2xl relative">
                <div id="interactive-diagram" class="relative h-[500px] md:h-[400px]">
                    <!-- Elements -->
                    <div id="home" class="interactive-element absolute top-1/2 -translate-y-1/2 left-4 md:left-12 text-center cursor-pointer" data-target="info-home">
                        <div class="text-5xl">💻</div><div class="text-xs font-bold">המחשב שלך</div>
                    </div>
                    <div id="router" class="interactive-element absolute top-1/2 -translate-y-1/2 left-1/4 md:left-1/3 text-center cursor-pointer" data-target="info-router">
                        <div class="text-5xl">📡</div><div class="text-xs font-bold">נתב (ראוטר)</div>
                    </div>
                     <div id="internet" class="interactive-element absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-center cursor-pointer" data-target="info-internet">
                        <div class="text-6xl md:text-8xl">☁️</div><div class="text-xs font-bold">האינטרנט</div>
                    </div>
                    <div id="servers" class="interactive-element absolute top-1/2 -translate-y-1/2 right-4 md:right-12 text-center cursor-pointer" data-target="info-servers">
                        <div class="text-5xl">🗄️</div><div class="text-xs font-bold">שרתים</div>
                    </div>
                     <!-- Lines -->
                    <div class="absolute w-full h-full top-0 left-0 -z-10">
                        <svg class="w-full h-full" viewbox="0 0 400 200" preserveAspectRatio="none">
                            <path d="M 40 100 H 130" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5"/>
                            <path d="M 140 100 C 170 80, 170 120, 200 100" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
                             <path d="M 200 100 C 230 80, 230 120, 260 100" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
                            <path d="M 270 100 H 360" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5"/>
                        </svg>
                    </div>

                    <div id="data-packet"></div>
                </div>

                <div id="info-panel" class="mt-8 p-4 bg-blue-50 border-t-4 border-blue-500 rounded-b text-blue-900 shadow-lg min-h-[160px]">
                    <h3 id="info-title" class="text-xl font-bold mb-2">לחצו על רכיב בדיאגרמה כדי ללמוד עליו</h3>
                    <p id="info-text">האנימציה הזו מדגימה איך חבילת מידע נשלחת מהמחשב שלכם לשרת וחזרה דרך רשת האינטרנט.</p>
                </div>
            </div>

            <div class="flex justify-between mt-12">
                <button class="nav-linear-btn prev-btn bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition" onclick="goToPrevSection()">&#8249; קודם</button>
                <button class="nav-linear-btn next-btn bg-blue-600 text-white font-bold py-2 px-6 rounded-full hover:bg-blue-700 transition" onclick="goToNextSection()">הבא &#8250;</button>
            </div>
        </section>

        <section id="gateway" class="section">
             <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-blue-800 mb-4">השער שלך לעולם האינטרנט</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">האינטרנט הוא עולם ומלואו, אבל איך אנחנו נכנסים אליו? כאן נכיר את הכלים שמאפשרים לנו לגלוש ונראה כיצד האינטרנט הפך לחלק בלתי נפרד מהפעולות היומיומיות שלנו.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8 items-start">
                 <div class="bg-white p-6 rounded-lg shadow-lg">
                     <h2 class="text-2xl font-bold mb-4 text-blue-700">הדפדפן - חלון הראווה שלך</h2>
                     <div class="p-4 border rounded-md bg-gray-50">
                        <div class="flex items-center space-x-1 rtl:space-x-reverse mb-2">
                             <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                             <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
                             <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                         </div>
                         <div class="bg-white p-2 rounded border border-gray-300 text-gray-500">
                            https://www.example.com
                         </div>
                     </div>
                     <p class="mt-4"><strong class="font-semibold">דפדפן:</strong> תוכנות כמו כרום (Chrome) או ספארי (Safari) הן ה"שער" שלכם לאינטרנט.</p>
                     <p class="mt-2"><strong class="font-semibold">כתובת אתר (URL):</strong> כשאתם מקלידים כתובת, הדפדפן שלכם יודע לאן לבקש את המידע.</p>
                      <p class="mt-2"><strong class="font-semibold">הצגת המידע:</strong> השרת שולח לדפדפן את המידע (קוד, תמונות, טקסט), והדפדפן "מתרגם" אותו ומציג לכם אותו בצורה ויזואלית.</p>
                 </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-blue-700">האינטרנט בחיי היומיום</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">✉️</div> <p>תקשורת</p>
                        </div>
                         <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">🎬</div> <p>בידור</p>
                        </div>
                         <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">📚</div> <p>מידע</p>
                        </div>
                         <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">🛒</div> <p>קניות</p>
                        </div>
                         <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">🏦</div> <p>בנקאות</p>
                        </div>
                         <div class="p-3 border rounded-md hover:shadow-md transition cursor-pointer">
                            <div class="text-4xl">🕹️</div> <p>משחקים</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-between mt-12">
                <button class="nav-linear-btn prev-btn bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition" onclick="goToPrevSection()">&#8249; קודם</button>
                <button class="nav-linear-btn next-btn bg-blue-600 text-white font-bold py-2 px-6 rounded-full hover:bg-blue-700 transition" onclick="goToNextSection()">הבא &#8250;</button>
            </div>
        </section>

        <section id="summary" class="section">
             <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-blue-800 mb-4">סיכום המסע</h1>
                 <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">עברנו דרך ארוכה, מהבנת המושג "רשת" ועד לראות איך האינטרנט עובד מאחורי הקלעים. זה הזמן לרכז את הנקודות החשובות ביותר שלמדנו.</p>
            </div>
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl">
                 <ul class="space-y-4">
                    <li class="flex items-center text-xl"><span class="text-green-500 text-3xl mr-3 rtl:ml-3 rtl:mr-0">✓</span> <strong>רשתות</strong> מחברות בין מכשירים כדי לשתף מידע ומשאבים.</li>
                    <li class="flex items-center text-xl"><span class="text-green-500 text-3xl mr-3 rtl:ml-3 rtl:mr-0">✓</span> <strong>האינטרנט</strong> היא רשת הרשתות הגלובלית, שמחברת את כל העולם.</li>
                    <li class="flex items-center text-xl"><span class="text-green-500 text-3xl mr-3 rtl:ml-3 rtl:mr-0">✓</span> <strong>נתבים, שרתים וכבלים</strong> הם מרכיבים חיוניים להפעלת האינטרנט.</li>
                    <li class="flex items-center text-xl"><span class="text-green-500 text-3xl mr-3 rtl:ml-3 rtl:mr-0">✓</span> <strong>הדפדפן</strong> הוא הכלי שלנו לגישה לאינטרנט.</li>
                    <li class="flex items-center text-xl"><span class="text-green-500 text-3xl mr-3 rtl:ml-3 rtl:mr-0">✓</span> האינטרנט הפך לחלק בלתי נפרד מחיינו וממשיך לשנות את העולם.</li>
                </ul>
            </div>

            <div class="flex justify-start mt-12">
                <button class="nav-linear-btn prev-btn bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition" onclick="goToPrevSection()">&#8249; קודם</button>
            </div>
        </section>

    </main>
    
    <footer class="text-center p-4 mt-8 text-gray-500 text-sm">
        <p>יישום אינטראקטיבי המבוסס על מצגת מאת צביאל קורן. נוצר כדי להפוך את הלמידה על רשתות ואינטרנט לחוויה מהנה וברורה.</p>
    </footer>

    <script>
        const sections = document.querySelectorAll('.section');
        const navBtns = document.querySelectorAll('.nav-btn');
        const sectionIds = ['intro', 'how-it-works', 'gateway', 'summary'];
        let currentSectionIndex = 0;
        let animationIntervalId = null; // To store the interval ID for animation loop

        function updateLinearNavButtons() {
            sections.forEach((section) => {
                const prevBtn = section.querySelector('.prev-btn');
                const nextBtn = section.querySelector('.next-btn');
                if (prevBtn) {
                    prevBtn.classList.add('hidden');
                }
                if (nextBtn) {
                    nextBtn.classList.add('hidden');
                }
            });

            const currentSectionElem = document.getElementById(sectionIds[currentSectionIndex]);
            if (currentSectionElem) {
                const prevBtn = currentSectionElem.querySelector('.prev-btn');
                const nextBtn = currentSectionElem.querySelector('.next-btn');

                if (prevBtn && currentSectionIndex > 0) {
                    prevBtn.classList.remove('hidden');
                }
                if (nextBtn && currentSectionIndex < sectionIds.length - 1) {
                    nextBtn.classList.remove('hidden');
                }
            }
        }

        function showSection(id) {
            // Stop existing animation if any
            if (animationIntervalId) {
                clearInterval(animationIntervalId);
                animationIntervalId = null;
                dataPacket.style.opacity = '0'; // Hide packet when changing sections
            }

            sections.forEach(section => {
                section.style.display = 'none';
                section.classList.remove('active');
            });
            navBtns.forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(id).style.display = 'block';
            document.getElementById(id).classList.add('active');
            
            const activeBtn = document.querySelector(`.nav-btn[onclick="showSection('${id}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            currentSectionIndex = sectionIds.indexOf(id);
            updateLinearNavButtons();

            // Start animation if it's the "how-it-works" section
            if (id === 'how-it-works') {
                // Initial call and then loop
                playPacketAnimation();
                animationIntervalId = setInterval(playPacketAnimation, 6500); // Loop after total animation duration
            }
        }

        function goToNextSection() {
            if (currentSectionIndex < sectionIds.length - 1) {
                currentSectionIndex++;
                showSection(sectionIds[currentSectionIndex]);
            }
        }

        function goToPrevSection() {
            if (currentSectionIndex > 0) {
                currentSectionIndex--;
                showSection(sectionIds[currentSectionIndex]);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            showSection(sectionIds[0]); // Initialize the first section
        });


        const interactiveElements = document.querySelectorAll('.interactive-element');
        const infoTitle = document.getElementById('info-title');
        const infoText = document.getElementById('info-text');

        const infoData = {
            'info-home': {
                title: 'המחשב שלך (לקוח)',
                text: 'זו נקודת ההתחלה. כשאתה רוצה לגלוש לאתר, המחשב שלך (הלקוח) שולח בקשה לקבלת מידע.'
            },
            'info-router': {
                title: 'נתב (ראוטר)',
                text: 'הנתב הוא "שוטר התנועה" של הרשת הביתית שלך. הוא מקבל את הבקשה מהמחשב שלך ומעביר אותה הלאה, אל ספק האינטרנט ומשם לרשת העולמית.'
            },
            'info-internet': {
                title: 'האינטרנט',
                text: 'זו "רשת הרשתות" העצומה. היא מורכבת מאין ספור נתבים, כבלים (כולל תת-ימיים!) וחיבורים שמעבירים את הבקשה שלך במהירות ליעדה.'
            },
            'info-servers': {
                title: 'שרתים',
                text: 'השרת הוא מחשב חזק שמאחסן את קבצי האתר (טקסט, תמונות, קוד). כשהוא מקבל את הבקשה שלך, הוא שולח את המידע בחזרה למחשב שלך.'
            }
        };

        interactiveElements.forEach(elem => {
            elem.addEventListener('click', () => {
                const targetId = elem.dataset.target;
                infoTitle.textContent = infoData[targetId].title;
                infoText.textContent = infoData[targetId].text;
            });
        });
        
        const dataPacket = document.getElementById('data-packet');
        const homeElem = document.getElementById('home');
        const routerElem = document.getElementById('router');
        const internetElem = document.getElementById('internet');
        const serversElem = document.getElementById('servers');
        
        function playPacketAnimation() {
            const diagramRect = document.getElementById('interactive-diagram').getBoundingClientRect();

            // Calculate center positions relative to the diagram
            const getCenterPos = (element) => {
                const rect = element.getBoundingClientRect();
                return {
                    x: (rect.left + rect.width / 2) - diagramRect.left,
                    y: (rect.top + rect.height / 2) - diagramRect.top
                };
            };

            const homeCenter = getCenterPos(homeElem);
            const routerCenter = getCenterPos(routerElem);
            const internetCenter = getCenterPos(internetElem);
            const serversCenter = getCenterPos(serversElem);

            // Reset packet for new animation loop
            dataPacket.style.transition = 'none'; // Disable transition for instant reset
            dataPacket.style.left = `${homeCenter.x - dataPacket.offsetWidth / 2}px`;
            dataPacket.style.top = `${homeCenter.y - dataPacket.offsetHeight / 2}px`;
            dataPacket.style.backgroundColor = '#ef4444'; // Red for sending
            dataPacket.style.opacity = '0';

            // Re-enable transition after reset
            setTimeout(() => {
                dataPacket.style.transition = 'left 1s ease-in-out, top 1s ease-in-out, background-color 0.3s ease';
                dataPacket.style.opacity = '1';
            }, 50); // Small delay to allow transition property to apply

            let currentDelay = 50; // Initial small delay before first move

            const movePacket = (targetPos, color) => {
                setTimeout(() => {
                    dataPacket.style.left = `${targetPos.x - dataPacket.offsetWidth / 2}px`;
                    dataPacket.style.top = `${targetPos.y - dataPacket.offsetHeight / 2}px`;
                    if (color) {
                        dataPacket.style.backgroundColor = color;
                    }
                }, currentDelay);
                currentDelay += 1000; // Add 1 second for each segment transition
            };

            // Request path
            movePacket(routerCenter); // Home to Router
            movePacket(internetCenter); // Router to Internet
            movePacket(serversCenter); // Internet to Servers (request arrives)
            
            // Response path
            movePacket(internetCenter, '#22c55e'); // Servers to Internet (response starts, color change)
            movePacket(routerCenter); // Internet to Router
            movePacket(homeCenter); // Router to Home (response arrives back)

            // Final reset (hide packet)
            setTimeout(() => {
                dataPacket.style.opacity = '0';
            }, currentDelay); // Packet visible until the very end
        }

    </script>
</body>
</html>
